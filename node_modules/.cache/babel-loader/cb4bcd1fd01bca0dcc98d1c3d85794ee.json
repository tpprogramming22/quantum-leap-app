{"ast":null,"code":"import _objectSpread from\"/Users/ted/Downloads/Adminto_React_v1.1/adminto-react/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/ted/Downloads/Adminto_React_v1.1/adminto-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{Modal,Button,Row,Col}from'react-bootstrap';import{useForm}from'react-hook-form';import*as yup from'yup';import{yupResolver}from'@hookform/resolvers/yup';// editor\nimport{EditorState,convertToRaw,ContentState}from'draft-js';import{Editor}from'react-draft-wysiwyg';import draftToHtml from'draftjs-to-html';import htmlToDraft from'html-to-draftjs';// styles\nimport'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';// components\nimport{FormInput}from'../../../components/form/';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Compose=function Compose(_ref){var isOpen=_ref.isOpen,toggleComposeModal=_ref.toggleComposeModal;var _useState=useState(EditorState.createEmpty()),_useState2=_slicedToArray(_useState,2),editorState=_useState2[0],setEditorState=_useState2[1];useEffect(function(){var html=\"<h3><span class=\\\"ql-size-large\\\">Hello World!</span></h3>\\n            <h5>This is a simple editable area.</h5>\\n            <ul><li>Select a text to reveal the toolbar.</li><li>Edit rich document on-the-fly, so elastic!</li></ul>\\n            <p>End of simple area</p>\";var contentBlock=htmlToDraft(html);if(contentBlock){var contentState=ContentState.createFromBlockArray(contentBlock.contentBlocks);setEditorState(EditorState.createWithContent(contentState));}},[]);var schemaResolver=yupResolver(yup.object().shape({to:yup.string().required('Please specify to email').email('Please enter valid Email'),subject:yup.string().required('Please specify subject')}));// form methods\nvar methods=useForm({defaultValues:{},resolver:schemaResolver});var handleSubmit=methods.handleSubmit,register=methods.register,control=methods.control,errors=methods.formState.errors;/**\n     * Handles the save\n     * @param {*} event\n     * @param {*} values\n     */var handleEmailSave=function handleEmailSave(event,values){var body=draftToHtml(convertToRaw(editorState.getCurrentContent()));console.log(_objectSpread(_objectSpread({},values),{},{body:body}));toggleComposeModal();};/**\n     * On editor body change\n     */var onEditorStateChange=function onEditorStateChange(editorStates){setEditorState(editorStates);};return/*#__PURE__*/_jsxs(Modal,{show:isOpen,onHide:toggleComposeModal,centered:true,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,onHide:toggleComposeModal,children:/*#__PURE__*/_jsx(Modal.Title,{as:\"h4\",children:\"Compose Mail\"})}),/*#__PURE__*/_jsx(Modal.Body,{as:\"h5\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(handleEmailSave),children:[/*#__PURE__*/_jsx(FormInput,{type:\"email\",name:\"to\",placeholder:\"To\",containerClass:'mb-3',register:register,errors:errors,control:control},\"to\"),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsx(FormInput,{type:\"email\",name:\"cc\",placeholder:\"Cc\",containerClass:'mb-3'})}),/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsx(FormInput,{type:\"email\",name:\"bcc\",placeholder:\"Bcc\",containerClass:'mb-3'})})]}),/*#__PURE__*/_jsx(FormInput,{type:\"text\",name:\"subject\",placeholder:\"Subject\",containerClass:'mb-3',register:register,errors:errors,control:control},\"subject\"),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3 card border-0\",children:/*#__PURE__*/_jsx(Editor,{editorState:editorState,onEditorStateChange:onEditorStateChange,toolbarClassName:\"draft-toolbar\",editorClassName:\"react-draft-editor\",wrapperClassName:\"react-draft-wrapper  border border-1 rounded-1\",editorStyle:{minHeight:'170px'},toolbar:{options:['inline','fontSize','fontFamily','list','textAlign','link'],inline:{inDropdown:true},list:{inDropdown:true},textAlign:{inDropdown:true},link:{inDropdown:true}}})}),/*#__PURE__*/_jsx(\"div\",{className:\"btn-toolbar\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"float-end\",children:[/*#__PURE__*/_jsx(Button,{className:\"btn-success waves-effect waves-light me-1\",children:/*#__PURE__*/_jsx(\"i\",{className:\"far fa-save\"})}),/*#__PURE__*/_jsx(Button,{className:\"btn-success waves-effect waves-light me-1\",children:/*#__PURE__*/_jsx(\"i\",{className:\"far fa-trash-alt\"})}),/*#__PURE__*/_jsxs(Button,{type:\"submit\",className:\"btn-purple waves-effect waves-light\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Send\"}),/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-paper-plane ms-1\"})]})]})})]})})]});};export default Compose;","map":{"version":3,"sources":["/Users/ted/Downloads/Adminto_React_v1.1/adminto-react/src/pages/apps/Email/Compose.tsx"],"names":["React","useEffect","useState","Modal","Button","Row","Col","useForm","yup","yupResolver","EditorState","convertToRaw","ContentState","Editor","draftToHtml","htmlToDraft","FormInput","Compose","isOpen","toggleComposeModal","createEmpty","editorState","setEditorState","html","contentBlock","contentState","createFromBlockArray","contentBlocks","createWithContent","schemaResolver","object","shape","to","string","required","email","subject","methods","defaultValues","resolver","handleSubmit","register","control","errors","formState","handleEmailSave","event","values","body","getCurrentContent","console","log","onEditorStateChange","editorStates","minHeight","options","inline","inDropdown","list","textAlign","link"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Modal, Button, Row, Col } from 'react-bootstrap';\nimport { useForm } from 'react-hook-form';\nimport * as yup from 'yup';\nimport { yupResolver } from '@hookform/resolvers/yup';\n\n// editor\nimport { EditorState, convertToRaw, ContentState } from 'draft-js';\nimport { Editor } from 'react-draft-wysiwyg';\nimport draftToHtml from 'draftjs-to-html';\nimport htmlToDraft from 'html-to-draftjs';\n\n// styles\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\n\n// components\nimport { FormInput } from '../../../components/form/';\n\ntype ComposeEmailProps = {\n    isOpen: boolean;\n    toggleComposeModal: () => void;\n};\n\nconst Compose = ({ isOpen, toggleComposeModal }: ComposeEmailProps) => {\n    const [editorState, setEditorState] = useState(EditorState.createEmpty());\n\n    useEffect(() => {\n        const html = `<h3><span class=\"ql-size-large\">Hello World!</span></h3>\n            <h5>This is a simple editable area.</h5>\n            <ul><li>Select a text to reveal the toolbar.</li><li>Edit rich document on-the-fly, so elastic!</li></ul>\n            <p>End of simple area</p>`;\n        const contentBlock = htmlToDraft(html);\n        if (contentBlock) {\n            const contentState = ContentState.createFromBlockArray(contentBlock.contentBlocks);\n            setEditorState(EditorState.createWithContent(contentState));\n        }\n    }, []);\n\n    const schemaResolver = yupResolver(\n        yup.object().shape({\n            to: yup.string().required('Please specify to email').email('Please enter valid Email'),\n            subject: yup.string().required('Please specify subject'),\n        })\n    );\n\n    // form methods\n    const methods = useForm({ defaultValues: {}, resolver: schemaResolver });\n    const {\n        handleSubmit,\n        register,\n        control,\n        formState: { errors },\n    } = methods;\n\n    /**\n     * Handles the save\n     * @param {*} event\n     * @param {*} values\n     */\n    const handleEmailSave = (event: any, values: any) => {\n        const body = draftToHtml(convertToRaw(editorState.getCurrentContent()));\n        console.log({ ...values, body });\n        toggleComposeModal();\n    };\n\n    /**\n     * On editor body change\n     */\n    const onEditorStateChange = (editorStates: React.SetStateAction<EditorState>) => {\n        setEditorState(editorStates);\n    };\n\n    return (\n        <Modal show={isOpen} onHide={toggleComposeModal} centered>\n            <Modal.Header closeButton onHide={toggleComposeModal}>\n                <Modal.Title as=\"h4\">Compose Mail</Modal.Title>\n            </Modal.Header>\n\n            <Modal.Body as=\"h5\">\n                <form onSubmit={handleSubmit(handleEmailSave)}>\n                    <FormInput\n                        type=\"email\"\n                        name=\"to\"\n                        placeholder=\"To\"\n                        containerClass={'mb-3'}\n                        register={register}\n                        key=\"to\"\n                        errors={errors}\n                        control={control}\n                    />\n\n                    <Row>\n                        <Col md={6}>\n                            <FormInput type=\"email\" name=\"cc\" placeholder=\"Cc\" containerClass={'mb-3'} />\n                        </Col>\n                        <Col md={6}>\n                            <FormInput type=\"email\" name=\"bcc\" placeholder=\"Bcc\" containerClass={'mb-3'} />\n                        </Col>\n                    </Row>\n\n                    <FormInput\n                        type=\"text\"\n                        name=\"subject\"\n                        placeholder=\"Subject\"\n                        containerClass={'mb-3'}\n                        register={register}\n                        key=\"subject\"\n                        errors={errors}\n                        control={control}\n                    />\n\n                    <div className=\"mb-3 card border-0\">\n                        <Editor\n                            editorState={editorState}\n                            onEditorStateChange={onEditorStateChange}\n                            toolbarClassName=\"draft-toolbar\"\n                            editorClassName=\"react-draft-editor\"\n                            wrapperClassName=\"react-draft-wrapper  border border-1 rounded-1\"\n                            editorStyle={{ minHeight: '170px' }}\n                            toolbar={{\n                                options: ['inline', 'fontSize', 'fontFamily', 'list', 'textAlign', 'link'],\n                                inline: { inDropdown: true },\n                                list: { inDropdown: true },\n                                textAlign: { inDropdown: true },\n                                link: { inDropdown: true },\n                            }}\n                        />\n                    </div>\n                    <div className=\"btn-toolbar\">\n                        <div className=\"float-end\">\n                            <Button className=\"btn-success waves-effect waves-light me-1\">\n                                <i className=\"far fa-save\"></i>\n                            </Button>\n                            <Button className=\"btn-success waves-effect waves-light me-1\">\n                                <i className=\"far fa-trash-alt\"></i>\n                            </Button>\n                            <Button type=\"submit\" className=\"btn-purple waves-effect waves-light\">\n                                <span>Send</span>\n                                <i className=\"fas fa-paper-plane ms-1\"></i>\n                            </Button>\n                        </div>\n                    </div>\n                </form>\n            </Modal.Body>\n        </Modal>\n    );\n};\n\nexport default Compose;\n"]},"metadata":{},"sourceType":"module"}