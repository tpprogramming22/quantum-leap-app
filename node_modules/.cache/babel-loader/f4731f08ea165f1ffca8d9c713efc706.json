{"ast":null,"code":"import _objectSpread from\"/Users/ted/Downloads/Adminto_React_v1.1/adminto-react/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/Users/ted/Downloads/Adminto_React_v1.1/adminto-react/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/ted/Downloads/Adminto_React_v1.1/adminto-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{Link}from'react-router-dom';import{Row,Col,Card}from'react-bootstrap';import Dropzone from'react-dropzone';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var FileUploader=function FileUploader(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),selectedFiles=_useState2[0],setSelectedFiles=_useState2[1];/**\n     * Handled the accepted files and shows the preview\n     */var handleAcceptedFiles=function handleAcceptedFiles(files){var allFiles=files;if(props.showPreview){var _allFiles;(files||[]).map(function(file){return Object.assign(file,{preview:file['type'].split('/')[0]==='image'?URL.createObjectURL(file):null,formattedSize:formatBytes(file.size)});});allFiles=_toConsumableArray(selectedFiles);(_allFiles=allFiles).push.apply(_allFiles,_toConsumableArray(files));setSelectedFiles(allFiles);}if(props.onFileUpload)props.onFileUpload(allFiles);};/**\n     * Formats the size\n     */var formatBytes=function formatBytes(bytes){var decimals=arguments.length>1&&arguments[1]!==undefined?arguments[1]:2;if(bytes===0)return'0 Bytes';var k=1024;var dm=decimals<0?0:decimals;var sizes=['Bytes','KB','MB','GB','TB','PB','EB','ZB','YB'];var i=Math.floor(Math.log(bytes)/Math.log(k));return parseFloat((bytes/Math.pow(k,i)).toFixed(dm))+' '+sizes[i];};/*\n     * Removes the selected file\n     */var removeFile=function removeFile(fileIndex){var newFiles=_toConsumableArray(selectedFiles);newFiles.splice(fileIndex,1);setSelectedFiles(newFiles);if(props.onFileUpload)props.onFileUpload(newFiles);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Dropzone,_objectSpread(_objectSpread({},props),{},{onDrop:function onDrop(acceptedFiles){return handleAcceptedFiles(acceptedFiles);},children:function children(_ref){var getRootProps=_ref.getRootProps,getInputProps=_ref.getInputProps;return/*#__PURE__*/_jsx(\"div\",{className:\"dropzone\",children:/*#__PURE__*/_jsxs(\"div\",_objectSpread(_objectSpread({className:\"dz-message needsclick\"},getRootProps()),{},{children:[/*#__PURE__*/_jsx(\"input\",_objectSpread({},getInputProps())),/*#__PURE__*/_jsx(\"i\",{className:\"h3 text-muted dripicons-cloud-upload\"}),/*#__PURE__*/_jsx(\"h4\",{children:\"Drop files here or click to upload.\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-muted font-13\",children:[\"(This is just a demo dropzone. Selected files are \",/*#__PURE__*/_jsx(\"strong\",{children:\"not\"}),\" actually uploaded.)\"]})]}))});}})),props.showPreview&&/*#__PURE__*/_jsx(\"div\",{className:\"dropzone-previews mt-3\",id:\"uploadPreviewTemplate\",children:(selectedFiles||[]).map(function(f,i){return/*#__PURE__*/_jsx(Card,{className:\"mt-1 mb-0 shadow-none border\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-2\",children:/*#__PURE__*/_jsxs(Row,{className:\"align-items-center\",children:[f.preview&&/*#__PURE__*/_jsx(Col,{className:\"col-auto\",children:/*#__PURE__*/_jsx(\"img\",{\"data-dz-thumbnail\":\"\",className:\"avatar-sm rounded bg-light\",alt:f.name,src:f.preview})}),!f.preview&&/*#__PURE__*/_jsx(Col,{className:\"col-auto\",children:/*#__PURE__*/_jsx(\"div\",{className:\"avatar-sm\",children:/*#__PURE__*/_jsx(\"span\",{className:\"avatar-title bg-primary rounded\",children:f.type.split('/')[0]})})}),/*#__PURE__*/_jsxs(Col,{className:\"ps-0\",children:[/*#__PURE__*/_jsx(Link,{to:\"#\",className:\"text-muted fw-bold\",children:f.name}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-0\",children:/*#__PURE__*/_jsx(\"strong\",{children:f.formattedSize})})]}),/*#__PURE__*/_jsx(Col,{className:\"text-end\",children:/*#__PURE__*/_jsx(Link,{to:\"#\",className:\"btn btn-link btn-lg text-muted shadow-none\",children:/*#__PURE__*/_jsx(\"i\",{className:\"dripicons-cross\",onClick:function onClick(){return removeFile(i);}})})})]})})},i+'-file');})})]});};FileUploader.defaultProps={showPreview:true};export default FileUploader;","map":{"version":3,"sources":["/Users/ted/Downloads/Adminto_React_v1.1/adminto-react/src/components/FileUploader.tsx"],"names":["React","useState","Link","Row","Col","Card","Dropzone","FileUploader","props","selectedFiles","setSelectedFiles","handleAcceptedFiles","files","allFiles","showPreview","map","file","Object","assign","preview","split","URL","createObjectURL","formattedSize","formatBytes","size","push","onFileUpload","bytes","decimals","k","dm","sizes","i","Math","floor","log","parseFloat","pow","toFixed","removeFile","fileIndex","newFiles","splice","acceptedFiles","getRootProps","getInputProps","f","name","type","defaultProps"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Row, Col, Card } from 'react-bootstrap';\nimport Dropzone from 'react-dropzone';\n\ntype FileType = File & {\n    preview?: string;\n    formattedSize?: string;\n};\n\ntype FileUploaderProps = {\n    onFileUpload?: (files: FileType[]) => void;\n    showPreview?: boolean;\n};\n\nconst FileUploader = (props: FileUploaderProps) => {\n    const [selectedFiles, setSelectedFiles] = useState<FileType[]>([]);\n\n    /**\n     * Handled the accepted files and shows the preview\n     */\n    const handleAcceptedFiles = (files: FileType[]) => {\n        var allFiles = files;\n\n        if (props.showPreview) {\n            (files || []).map((file) =>\n                Object.assign(file, {\n                    preview: file['type'].split('/')[0] === 'image' ? URL.createObjectURL(file) : null,\n                    formattedSize: formatBytes(file.size),\n                })\n            );\n            allFiles = [...selectedFiles];\n            allFiles.push(...files);\n            setSelectedFiles(allFiles);\n        }\n\n        if (props.onFileUpload) props.onFileUpload(allFiles);\n    };\n\n    /**\n     * Formats the size\n     */\n    const formatBytes = (bytes: number, decimals: number = 2) => {\n        if (bytes === 0) return '0 Bytes';\n        const k = 1024;\n        const dm = decimals < 0 ? 0 : decimals;\n        const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n\n        const i = Math.floor(Math.log(bytes) / Math.log(k));\n        return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];\n    };\n\n    /*\n     * Removes the selected file\n     */\n    const removeFile = (fileIndex: number) => {\n        const newFiles = [...selectedFiles];\n        newFiles.splice(fileIndex, 1);\n        setSelectedFiles(newFiles);\n        if (props.onFileUpload) props.onFileUpload(newFiles);\n    };\n\n    return (\n        <>\n            <Dropzone {...props} onDrop={(acceptedFiles) => handleAcceptedFiles(acceptedFiles)}>\n                {({ getRootProps, getInputProps }) => (\n                    <div className=\"dropzone\">\n                        <div className=\"dz-message needsclick\" {...getRootProps()}>\n                            <input {...getInputProps()} />\n                            <i className=\"h3 text-muted dripicons-cloud-upload\"></i>\n                            <h4>Drop files here or click to upload.</h4>\n                            <span className=\"text-muted font-13\">\n                                (This is just a demo dropzone. Selected files are <strong>not</strong> actually\n                                uploaded.)\n                            </span>\n                        </div>\n                    </div>\n                )}\n            </Dropzone>\n\n            {props.showPreview && (\n                <div className=\"dropzone-previews mt-3\" id=\"uploadPreviewTemplate\">\n                    {(selectedFiles || []).map((f, i) => {\n                        return (\n                            <Card className=\"mt-1 mb-0 shadow-none border\" key={i + '-file'}>\n                                <div className=\"p-2\">\n                                    <Row className=\"align-items-center\">\n                                        {f.preview && (\n                                            <Col className=\"col-auto\">\n                                                <img\n                                                    data-dz-thumbnail=\"\"\n                                                    className=\"avatar-sm rounded bg-light\"\n                                                    alt={f.name}\n                                                    src={f.preview}\n                                                />\n                                            </Col>\n                                        )}\n                                        {!f.preview && (\n                                            <Col className=\"col-auto\">\n                                                <div className=\"avatar-sm\">\n                                                    <span className=\"avatar-title bg-primary rounded\">\n                                                        {f.type.split('/')[0]}\n                                                    </span>\n                                                </div>\n                                            </Col>\n                                        )}\n                                        <Col className=\"ps-0\">\n                                            <Link to=\"#\" className=\"text-muted fw-bold\">\n                                                {f.name}\n                                            </Link>\n                                            <p className=\"mb-0\">\n                                                <strong>{f.formattedSize}</strong>\n                                            </p>\n                                        </Col>\n                                        <Col className=\"text-end\">\n                                            <Link to=\"#\" className=\"btn btn-link btn-lg text-muted shadow-none\">\n                                                <i className=\"dripicons-cross\" onClick={() => removeFile(i)}></i>\n                                            </Link>\n                                        </Col>\n                                    </Row>\n                                </div>\n                            </Card>\n                        );\n                    })}\n                </div>\n            )}\n        </>\n    );\n};\n\nFileUploader.defaultProps = {\n    showPreview: true,\n};\n\nexport default FileUploader;\n"]},"metadata":{},"sourceType":"module"}