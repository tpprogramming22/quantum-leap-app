{"ast":null,"code":"import _slicedToArray from\"/Users/ted/Downloads/Adminto_React_v1.1/adminto-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from'react';import{Col,Row}from'react-bootstrap';import{Link}from'react-router-dom';import SimpleBar from'simplebar-react';import classNames from'classnames';// hooks\nimport{usePageTitle}from'../../../hooks';// component\nimport{FormInput}from'../../../components/form';import LeftBar from'./LeftBar';import Message from'./Message';import Compose from'./Compose';// types\n// dummy data\nimport{emails as mails}from'./data';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var EmailList=function EmailList(_ref){var emails=_ref.emails,handleMessageClick=_ref.handleMessageClick,activeIndex=_ref.activeIndex;return/*#__PURE__*/_jsx(\"ul\",{className:\"message-list\",children:(emails||[]).map(function(email,index){return/*#__PURE__*/_jsxs(\"li\",{className:classNames({unread:!email.is_read,active:activeIndex===index,'blue-dot':email.label==='bills','orange-dot':email.label==='recharge','green-dot':email.label==='roommates'}),onClick:function onClick(){return handleMessageClick(index);},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mail-col mail-col-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"dot\"}),/*#__PURE__*/_jsx(\"div\",{className:\"checkbox-wrapper-mail\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-check\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",className:\"form-check-input\",id:'mail'+email.id}),/*#__PURE__*/_jsx(\"label\",{className:\"toggle\",htmlFor:'mail'+email.id})]})}),/*#__PURE__*/_jsx(\"span\",{className:classNames('star-toggle','far','fa-star')}),/*#__PURE__*/_jsx(\"p\",{className:\"title\",children:email.from_name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mail-col mail-col-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"subject\",children:[email.subject,\" \\xA0\\u2013\\xA0\",/*#__PURE__*/_jsx(\"span\",{className:\"teaser\",children:email.teaser})]}),/*#__PURE__*/_jsx(\"div\",{className:\"date\",children:email.time})]})]},index.toString());})});};var Inbox=function Inbox(){// set pagetitle\nusePageTitle({title:'Inbox',breadCrumbItems:[{path:'/apps/email/inbox',label:'Contacts'},{path:'/apps/email/inbox',label:'Inbox',active:true}]});var _useState=useState(mails.slice(0,20)),_useState2=_slicedToArray(_useState,2),emails=_useState2[0],setEmails=_useState2[1];var _useState3=useState(mails.length),_useState4=_slicedToArray(_useState3,1),totalEmails=_useState4[0];var _useState5=useState(20),_useState6=_slicedToArray(_useState5,1),pageSize=_useState6[0];var _useState7=useState(1),_useState8=_slicedToArray(_useState7,2),page=_useState8[0],setPage=_useState8[1];var _useState9=useState(20),_useState10=_slicedToArray(_useState9,2),setEndIndex=_useState10[1];var _useState11=useState(mails.filter(function(e){return e.is_read===false;}).length),_useState12=_slicedToArray(_useState11,1),totalUnreadEmails=_useState12[0];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),messageIsOpen=_useState14[0],setMessageIsOpen=_useState14[1];var _useState15=useState(null),_useState16=_slicedToArray(_useState15,2),activeIndex=_useState16[0],setActiveIndex=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),isOpen=_useState18[0],setIsOpen=_useState18[1];useEffect(function(){var footer=document.querySelector('footer.footer');footer===null||footer===void 0?void 0:footer.classList.add('d-none');return function(){footer===null||footer===void 0?void 0:footer.classList.remove('d-none');};},[]);// Toggles the compose modal\nvar toggleComposeModal=function toggleComposeModal(){setIsOpen(!isOpen);};// show mode messages\nvar showMoreMessages=function showMoreMessages(){var nextPage=page+1;if(nextPage>totalEmails/pageSize){nextPage=totalEmails/pageSize;}var endIdx=nextPage*pageSize;setPage(nextPage);setEndIndex(endIdx);setEmails(mails.slice(0,endIdx));};// handle overlay\nvar showOverlay=function showOverlay(){document.body.classList.add('show-main-overlay');};var hideOverlay=function hideOverlay(){document.body.classList.remove('show-main-overlay');};// handle message\nvar showMessage=function showMessage(){document.body.classList.add('show-message');setMessageIsOpen(true);};var hideMessage=function hideMessage(){document.body.classList.remove('show-message');setMessageIsOpen(false);setActiveIndex(null);};// hanlde sidebar\nvar showSidebar=function showSidebar(){document.body.classList.add('show-sidebar');};var hideSidebar=function hideSidebar(){document.body.classList.remove('show-sidebar');};var toggleSidebar=function toggleSidebar(){showSidebar();showOverlay();};var handleMessageClose=function handleMessageClose(){hideMessage();hideOverlay();};var handleMessageClick=function handleMessageClick(index){if(messageIsOpen&&activeIndex===index){hideMessage();hideOverlay();}else{if(messageIsOpen){hideMessage();setActiveIndex(index);setTimeout(function(){showMessage();},300);}else{setActiveIndex(index);showMessage();}showOverlay();}};var handleOverlayClick=function handleOverlayClick(){hideOverlay();hideMessage();hideSidebar();};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{sm:12,children:/*#__PURE__*/_jsx(\"div\",{className:\"inbox-app-main\",children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(\"aside\",{id:\"sidebar\",children:/*#__PURE__*/_jsxs(SimpleBar,{className:\"h-100\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(Link,{to:\"#\",className:\"btn btn-danger rounded-pill width-lg waves-effect waves-light mb-2 mt-3\",onClick:toggleComposeModal,children:\"Compose\"})}),/*#__PURE__*/_jsx(LeftBar,{totalUnreadEmails:totalUnreadEmails})]})})}),/*#__PURE__*/_jsxs(Col,{md:9,children:[/*#__PURE__*/_jsxs(\"main\",{id:\"main\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"overlay\",onClick:handleOverlayClick}),/*#__PURE__*/_jsxs(\"header\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"page-title\",children:/*#__PURE__*/_jsxs(Link,{to:\"#\",className:\"sidebar-toggle-btn trigger-toggle-sidebar\",onClick:toggleSidebar,children:[/*#__PURE__*/_jsx(\"span\",{className:\"line\"}),/*#__PURE__*/_jsx(\"span\",{className:\"line\"}),/*#__PURE__*/_jsx(\"span\",{className:\"line\"}),/*#__PURE__*/_jsx(\"span\",{className:\"line line-angle1\"}),/*#__PURE__*/_jsx(\"span\",{className:\"line line-angle2\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"action-bar float-start\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"list-inline mb-0\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"list-inline-item\",children:/*#__PURE__*/_jsx(Link,{to:\"#\",className:\"icon circle-icon\",children:/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-refresh text-muted\"})})}),/*#__PURE__*/_jsx(\"li\",{className:\"list-inline-item\",children:/*#__PURE__*/_jsx(Link,{to:\"#\",className:\"icon circle-icon\",children:/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-share text-muted\"})})}),/*#__PURE__*/_jsx(\"li\",{className:\"list-inline-item\",children:/*#__PURE__*/_jsx(Link,{to:\"#\",className:\"icon circle-icon red\",children:/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-close text-danger\"})})}),/*#__PURE__*/_jsx(\"li\",{className:\"list-inline-item\",children:/*#__PURE__*/_jsx(Link,{to:\"#\",className:\"icon circle-icon red\",children:/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-flag text-danger\"})})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-box float-end\",children:[/*#__PURE__*/_jsx(FormInput,{type:\"text\",name:\"searchMail\",placeholder:\"Search...\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon fa fa-search\"})]})]}),/*#__PURE__*/_jsx(\"div\",{id:\"main-nano-wrapper\",className:\"nano\",children:/*#__PURE__*/_jsxs(SimpleBar,{className:\"nano-content h-100\",children:[/*#__PURE__*/_jsx(EmailList,{emails:emails,handleMessageClick:handleMessageClick,activeIndex:activeIndex}),emails.length!==totalEmails&&/*#__PURE__*/_jsx(Link,{to:\"#\",className:\"load-more-link\",onClick:showMoreMessages,children:\"Show more messages\"})]})})]}),/*#__PURE__*/_jsx(Message,{handleMessageClose:handleMessageClose})]})]})})})}),isOpen&&/*#__PURE__*/_jsx(Compose,{isOpen:isOpen,toggleComposeModal:toggleComposeModal})]});};export default Inbox;","map":{"version":3,"sources":["/Users/ted/Downloads/Adminto_React_v1.1/adminto-react/src/pages/apps/Email/Inbox.tsx"],"names":["useEffect","useState","Col","Row","Link","SimpleBar","classNames","usePageTitle","FormInput","LeftBar","Message","Compose","emails","mails","EmailList","handleMessageClick","activeIndex","map","email","index","unread","is_read","active","label","id","from_name","subject","teaser","time","toString","Inbox","title","breadCrumbItems","path","slice","setEmails","length","totalEmails","pageSize","page","setPage","setEndIndex","filter","e","totalUnreadEmails","messageIsOpen","setMessageIsOpen","setActiveIndex","isOpen","setIsOpen","footer","document","querySelector","classList","add","remove","toggleComposeModal","showMoreMessages","nextPage","endIdx","showOverlay","body","hideOverlay","showMessage","hideMessage","showSidebar","hideSidebar","toggleSidebar","handleMessageClose","setTimeout","handleOverlayClick"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react';\nimport { Col, Row } from 'react-bootstrap';\nimport { Link } from 'react-router-dom';\nimport SimpleBar from 'simplebar-react';\nimport classNames from 'classnames';\n\n// hooks\nimport { usePageTitle } from '../../../hooks';\n\n// component\nimport { FormInput } from '../../../components/form';\n\nimport LeftBar from './LeftBar';\nimport Message from './Message';\nimport Compose from './Compose';\n\n// types\nimport { Email } from './types';\n\n// dummy data\nimport { emails as mails } from './data';\n\ntype EmailListProps = {\n    emails: Email[];\n    handleMessageClick: (i: number) => void;\n    activeIndex: number | null;\n};\n\nconst EmailList = ({ emails, handleMessageClick, activeIndex }: EmailListProps) => {\n    return (\n        <ul className=\"message-list\">\n            {(emails || []).map((email, index) => {\n                return (\n                    <li\n                        className={classNames({\n                            unread: !email.is_read,\n                            active: activeIndex === index,\n                            'blue-dot': email.label === 'bills',\n                            'orange-dot': email.label === 'recharge',\n                            'green-dot': email.label === 'roommates',\n                        })}\n                        key={index.toString()}\n                        onClick={() => handleMessageClick(index)}\n                    >\n                        <div className=\"mail-col mail-col-1\">\n                            <span className=\"dot\"></span>\n                            <div className=\"checkbox-wrapper-mail\">\n                                <div className=\"form-check\">\n                                    <input type=\"checkbox\" className=\"form-check-input\" id={'mail' + email.id} />\n                                    <label className=\"toggle\" htmlFor={'mail' + email.id}></label>\n                                </div>\n                            </div>\n                            <span className={classNames('star-toggle', 'far', 'fa-star')}></span>\n                            <p className=\"title\">{email.from_name}</p>\n                        </div>\n                        <div className=\"mail-col mail-col-2\">\n                            <div className=\"subject\">\n                                {email.subject} &nbsp;&ndash;&nbsp;\n                                <span className=\"teaser\">{email.teaser}</span>\n                            </div>\n                            <div className=\"date\">{email.time}</div>\n                        </div>\n                    </li>\n                );\n            })}\n        </ul>\n    );\n};\n\nconst Inbox = () => {\n    // set pagetitle\n    usePageTitle({\n        title: 'Inbox',\n        breadCrumbItems: [\n            {\n                path: '/apps/email/inbox',\n                label: 'Contacts',\n            },\n            {\n                path: '/apps/email/inbox',\n                label: 'Inbox',\n                active: true,\n            },\n        ],\n    });\n\n    const [emails, setEmails] = useState<Array<Email>>(mails.slice(0, 20));\n    const [totalEmails] = useState<number>(mails.length);\n    const [pageSize] = useState<number>(20);\n    const [page, setPage] = useState<number>(1);\n    const [, setEndIndex] = useState<number>(20);\n    const [totalUnreadEmails] = useState<number>(mails.filter((e: any) => e.is_read === false).length);\n    const [messageIsOpen, setMessageIsOpen] = useState(false);\n    const [activeIndex, setActiveIndex] = useState<number | null>(null);\n    const [isOpen, setIsOpen] = useState(false);\n\n    useEffect(() => {\n        let footer = document.querySelector('footer.footer');\n        footer?.classList.add('d-none');\n\n        return () => {\n            footer?.classList.remove('d-none');\n        };\n    }, []);\n\n    // Toggles the compose modal\n    const toggleComposeModal = () => {\n        setIsOpen(!isOpen);\n    };\n\n    // show mode messages\n    const showMoreMessages = () => {\n        var nextPage = page + 1;\n        if (nextPage > totalEmails / pageSize) {\n            nextPage = totalEmails / pageSize;\n        }\n        var endIdx = nextPage * pageSize;\n        setPage(nextPage);\n        setEndIndex(endIdx);\n        setEmails(mails.slice(0, endIdx));\n    };\n\n    // handle overlay\n    const showOverlay = () => {\n        document.body.classList.add('show-main-overlay');\n    };\n    const hideOverlay = () => {\n        document.body.classList.remove('show-main-overlay');\n    };\n\n    // handle message\n    const showMessage = () => {\n        document.body.classList.add('show-message');\n        setMessageIsOpen(true);\n    };\n    const hideMessage = () => {\n        document.body.classList.remove('show-message');\n        setMessageIsOpen(false);\n        setActiveIndex(null);\n    };\n\n    // hanlde sidebar\n    const showSidebar = () => {\n        document.body.classList.add('show-sidebar');\n    };\n    const hideSidebar = () => {\n        document.body.classList.remove('show-sidebar');\n    };\n\n    const toggleSidebar = () => {\n        showSidebar();\n        showOverlay();\n    };\n\n    const handleMessageClose = () => {\n        hideMessage();\n        hideOverlay();\n    };\n\n    const handleMessageClick = (index: number) => {\n        if (messageIsOpen && activeIndex === index) {\n            hideMessage();\n            hideOverlay();\n        } else {\n            if (messageIsOpen) {\n                hideMessage();\n                setActiveIndex(index);\n                setTimeout(function () {\n                    showMessage();\n                }, 300);\n            } else {\n                setActiveIndex(index);\n                showMessage();\n            }\n            showOverlay();\n        }\n    };\n\n    const handleOverlayClick = () => {\n        hideOverlay();\n        hideMessage();\n        hideSidebar();\n    };\n\n    return (\n        <>\n            <Row>\n                <Col sm={12}>\n                    <div className=\"inbox-app-main\">\n                        <Row>\n                            <Col md={3}>\n                                <aside id=\"sidebar\">\n                                    <SimpleBar className=\"h-100\">\n                                        <div className=\"text-center\">\n                                            <Link\n                                                to=\"#\"\n                                                className=\"btn btn-danger rounded-pill width-lg waves-effect waves-light mb-2 mt-3\"\n                                                onClick={toggleComposeModal}\n                                            >\n                                                Compose\n                                            </Link>\n                                        </div>\n\n                                        <LeftBar totalUnreadEmails={totalUnreadEmails} />\n                                    </SimpleBar>\n                                </aside>\n                            </Col>\n                            <Col md={9}>\n                                <main id=\"main\">\n                                    <div className=\"overlay\" onClick={handleOverlayClick}></div>\n                                    <header className=\"header\">\n                                        <h1 className=\"page-title\">\n                                            <Link\n                                                to=\"#\"\n                                                className=\"sidebar-toggle-btn trigger-toggle-sidebar\"\n                                                onClick={toggleSidebar}\n                                            >\n                                                <span className=\"line\"></span>\n                                                <span className=\"line\"></span>\n                                                <span className=\"line\"></span>\n                                                <span className=\"line line-angle1\"></span>\n                                                <span className=\"line line-angle2\"></span>\n                                            </Link>\n                                        </h1>\n                                        <div className=\"action-bar float-start\">\n                                            <ul className=\"list-inline mb-0\">\n                                                <li className=\"list-inline-item\">\n                                                    <Link to=\"#\" className=\"icon circle-icon\">\n                                                        <i className=\"mdi mdi-refresh text-muted\"></i>\n                                                    </Link>\n                                                </li>\n                                                <li className=\"list-inline-item\">\n                                                    <Link to=\"#\" className=\"icon circle-icon\">\n                                                        <i className=\"mdi mdi-share text-muted\"></i>\n                                                    </Link>\n                                                </li>\n                                                <li className=\"list-inline-item\">\n                                                    <Link to=\"#\" className=\"icon circle-icon red\">\n                                                        <i className=\"mdi mdi-close text-danger\"></i>\n                                                    </Link>\n                                                </li>\n                                                <li className=\"list-inline-item\">\n                                                    <Link to=\"#\" className=\"icon circle-icon red\">\n                                                        <i className=\"mdi mdi-flag text-danger\"></i>\n                                                    </Link>\n                                                </li>\n                                            </ul>\n                                        </div>\n                                        <div className=\"search-box float-end\">\n                                            <FormInput type=\"text\" name=\"searchMail\" placeholder=\"Search...\" />\n                                            <span className=\"icon fa fa-search\"></span>\n                                        </div>\n                                    </header>\n\n                                    <div id=\"main-nano-wrapper\" className=\"nano\">\n                                        <SimpleBar className=\"nano-content h-100\">\n                                            <EmailList\n                                                emails={emails}\n                                                handleMessageClick={handleMessageClick}\n                                                activeIndex={activeIndex}\n                                            />\n                                            {emails.length !== totalEmails && (\n                                                <Link to=\"#\" className=\"load-more-link\" onClick={showMoreMessages}>\n                                                    Show more messages\n                                                </Link>\n                                            )}\n                                        </SimpleBar>\n                                    </div>\n                                </main>\n\n                                <Message handleMessageClose={handleMessageClose} />\n                            </Col>\n                        </Row>\n                    </div>\n                </Col>\n            </Row>\n            {isOpen && <Compose isOpen={isOpen} toggleComposeModal={toggleComposeModal} />}\n        </>\n    );\n};\n\nexport default Inbox;\n"]},"metadata":{},"sourceType":"module"}